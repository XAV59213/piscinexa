# Tableau de bord pour plusieurs piscines : 'piscine' et 'spa'.
title: dashboard.multi_pool.title
views:
  - title: dashboard.multi_pool.views.piscinexa.title
    path: piscinexa
    icon: mdi:pool
    type: sidebar
    cards:
      - type: vertical-stack
        cards:
          - type: markdown
            content: |
              ## dashboard.multi_pool.cards.piscine_section.title
          - type: horizontal-stack
            cards:
              - type: button
                entity: button.piscinexa_piscine_test
                name: entity.button.piscinexa_piscine_test.name
              - type: button
                entity: button.piscinexa_piscine_reset
                name: entity.button.piscinexa_piscine_reset.name
          - type: entities
            title: dashboard.multi_pool.cards.manual_input.title
            entities:
              - entity: input_number.piscine_ph_current
                name: entity.input_number.piscine_ph_current.name
              - entity: input_number.piscine_chlore_current
                name: entity.input_number.piscine_chlore_current.name
          - type: entities
            entities:
              - entity: sensor.piscinexa_piscine_volume_eau
              - entity: sensor.piscinexa_piscine_tempsfiltration
              - entity: sensor.piscinexa_piscine_consopuissance
              - entity: sensor.piscinexa_piscine_ph
              - entity: sensor.piscinexa_piscine_ph_target
                name: entity.sensor.piscinexa_piscine_ph_target.name
              - type: template
                entity_id: sensor.piscinexa_piscine_ph_plus_ajouter
                name: entity.sensor.piscinexa_piscine_ph_plus_ajouter.name
                content: >
                  {% if states('sensor.piscinexa_piscine_ph_plus_ajouter') | float(default=0) > 0 %}
                    {{ states('sensor.piscinexa_piscine_ph_plus_ajouter') }} {{ state_attr('sensor.piscinexa_piscine_ph_plus_ajouter', 'unit_of_measurement') }}
                  {% else %}
                    dashboard.multi_pool.cards.template_ph_plus.no_adjustment
                  {% endif %}
              - type: template
                entity_id: sensor.piscinexa_piscine_ph_minus_ajouter
                name: entity.sensor.piscinexa_piscine_ph_minus_ajouter.name
                content: >
                  {% if states('sensor.piscinexa_piscine_ph_minus_ajouter') | float(default=0) > 0 %}
                    {{ states('sensor.piscinexa_piscine_ph_minus_ajouter') }} {{ state_attr('sensor.piscinexa_piscine_ph_minus_ajouter', 'unit_of_measurement') }}
                  {% else %}
                    dashboard.multi_pool.cards.template_ph_minus.no_adjustment
                  {% endif %}
              - entity: sensor.piscinexa_piscine_chlore
              - entity: sensor.piscinexa_piscine_chlore_target
                name: entity.sensor.piscinexa_piscine_chlore_target.name
              - entity: sensor.piscinexa_piscine_chloredifference
                unit: mg/L
                name: entity.sensor.piscinexa_piscine_chloredifference.name
              - type: template
                entity_id: sensor.piscinexa_piscine_chloreaajouter
                name: entity.sensor.piscinexa_piscine_chloreaajouter.name
                content: >
                  {% if states('sensor.piscinexa_piscine_chloreaajouter') | float(default=0) > 0 %}
                    {{ states('sensor.piscinexa_piscine_chloreaajouter') }} {{ state_attr('sensor.piscinexa_piscine_chloreaajouter', 'dose_unit') }} ({{ state_attr('sensor.piscinexa_piscine_chloreaajouter', 'treatment_type') }} pour {{ state_attr('sensor.piscinexa_piscine_chloreaajouter', 'volume') }} m³)
                  {% else %}
                    {{ state_attr('sensor.piscinexa_piscine_chloreaajouter', 'message') | default('entity.sensor.piscinexa_piscine_chloreaajouter.messages.remove_chlorine') }}
                  {% endif %}
              - entity: sensor.piscinexa_piscine_log
              - entity: sensor.piscinexa_piscine_pool_state
                name: entity.sensor.piscinexa_piscine_pool_state.name

      - type: vertical-stack
        cards:
          - type: markdown
            content: |
              ## dashboard.multi_pool.cards.spa_section.title
          - type: horizontal-stack
            cards:
              - type: button
                entity: button.piscinexa_spa_test
                name: entity.button.piscinexa_spa_test.name
              - type: button
                entity: button.piscinexa_spa_reset
                name: entity.button.piscinexa_spa_reset.name
          - type: entities
            title: dashboard.multi_pool.cards.manual_input.title
            entities:
              - entity: input_number.spa_ph_current
                name: entity.input_number.spa_ph_current.name
              - entity: input_number.spa_chlore_current
                name: entity.input_number.spa_chlore_current.name
          - type: entities
            entities:
              - entity: sensor.piscinexa_spa_volume_eau
              - entity: sensor.piscinexa_spa_tempsfiltration
              - entity: sensor.piscinexa_spa_consopuissance
              - entity: sensor.piscinexa_spa_ph
              - entity: sensor.piscinexa_spa_ph_target
                name: entity.sensor.piscinexa_spa_ph_target.name
              - type: template
                entity_id: sensor.piscinexa_spa_ph_plus_ajouter
                name: entity.sensor.piscinexa_spa_ph_plus_ajouter.name
                content: >
                  {% if states('sensor.piscinexa_spa_ph_plus_ajouter') | float(default=0) > 0 %}
                    {{ states('sensor.piscinexa_spa_ph_plus_ajouter') }} {{ state_attr('sensor.piscinexa_spa_ph_plus_ajouter', 'unit_of_measurement') }}
                  {% else %}
                    dashboard.multi_pool.cards.template_ph_plus.no_adjustment
                  {% endif %}
              - type: template
                entity_id: sensor.piscinexa_spa_ph_minus_ajouter
                name: entity.sensor.piscinexa_spa_ph_minus_ajouter.name
                content: >
                  {% if states('sensor.piscinexa_spa_ph_minus_ajouter') | float(default=0) > 0 %}
                    {{ states('sensor.piscinexa_spa_ph_minus_ajouter') }} {{ state_attr('sensor.piscinexa_spa_ph_minus_ajouter', 'unit_of_measurement') }}
                  {% else %}
                    dashboard.multi_pool.cards.template_ph_minus.no_adjustment
                  {% endif %}
              - entity: sensor.piscinexa_spa_chlore
              - entity: sensor.piscinexa_spa_chlore_target
                name: entity.sensor.piscinexa_spa_chlore_target.name
              - entity: sensor.piscinexa_spa_chloredifference
                unit: mg/L
                name: entity.sensor.piscinexa_spa_chloredifference.name
              - type: template
                entity_id: sensor.piscinexa_spa_chloreaajouter
                name: entity.sensor.piscinexa_spa_chloreaajouter.name
                content: >
                  {% if states('sensor.piscinexa_spa_chloreaajouter') | float(default=0) > 0 %}
                    {{ states('sensor.piscinexa_spa_chloreaajouter') }} {{ state_attr('sensor.piscinexa_spa_chloreaajouter', 'dose_unit') }} ({{ state_attr('sensor.piscinexa_spa_chloreaajouter', 'treatment_type') }} pour {{ state_attr('sensor.piscinexa_spa_chloreaajouter', 'volume') }} m³)
                  {% else %}
                    {{ state_attr('sensor.piscinexa_spa_chloreaajouter', 'message') | default('entity.sensor.piscinexa_spa_chloreaajouter.messages.remove_chlorine') }}
                  {% endif %}
              - entity: sensor.piscinexa_spa_log
              - entity: sensor.piscinexa_spa_pool_state
                name: entity.sensor.piscinexa_spa_pool_state.name

      - type: vertical-stack
        cards:
          - type: markdown
            content: |
              ## dashboard.multi_pool.cards.history_section.title
          - type: history-graph
            hours_to_show: 48
            refresh_interval: 300
            entities:
              - entity: sensor.piscinexa_piscine_ph
              - entity: sensor.piscinexa_piscine_ph_target
              - entity: sensor.piscinexa_piscine_chlore
              - entity: sensor.piscinexa_spa_ph
              - entity: sensor.piscinexa_spa_ph_target
              - entity: sensor.piscinexa_spa_chlore