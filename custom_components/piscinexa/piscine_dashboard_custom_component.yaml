title: Tableau de bord Piscinexa
views:
  - title: Piscines
    path: piscinexa
    icon: mdi:pool
    type: sidebar
    cards:
      - type: vertical-stack
        cards:
          - type: markdown
            content: |
              ## Piscine Papa
          - type: horizontal-stack
            cards:
              - type: button
                entity: button.papatest
                name: Tester
              - type: button
                entity: button.papareset
                name: Réinitialiser
          - type: entities
            title: Saisie manuelle
            entities:
              - input_number.papa_ph_current
                name: pH Actuel
              - input_number.papa_chlore_current
                name: Chlore Actuel
          - type: entities
            entities:
              - sensor.papavolumeeau
              - sensor.papatempsfiltration
              - sensor.papaph
              - sensor.papachlore
              - type: template
                entity_id: sensor.papachloreaajouter
                name: Chlore à ajouter
                content: >
                  {% if states('sensor.papachloreaajouter') | float(default=0) > 0 %}
                    {{ states('sensor.papachloreaajouter') }} g
                  {% else %}
                    {{ state_attr('sensor.papachloreaajouter', 'message') or 'Retirer le chlore, pas de besoin actuellement' }}
                  {% endif %}
              - sensor.papalog

      - type: vertical-stack
        cards:
          - type: markdown
            content: |
              ## Piscine Maman
          - type: horizontal-stack
            cards:
              - type: button
                entity: button.mamantest
                name: Tester
              - type: button
                entity: button.mamanreset
                name: Réinitialiser
          - type: entities
            title: Saisie manuelle
            entities:
              - input_number.maman_ph_current
                name: pH Actuel
              - input_number.maman_chlore_current
                name: Chlore Actuel
          - type: entities
            entities:
              - sensor.mamanvolumeeau
              - sensor.mamantempsfiltration
              - sensor.mamanph
              - sensor.mamanchlore
              - type: template
                entity_id: sensor.mamanchloreaajouter
                name: Chlore à ajouter
                content: >
                  {% if states('sensor.mamanchloreaajouter') | float(default=0) > 0 %}
                    {{ states('sensor.mamanchloreaajouter') }} g
                  {% else %}
                    {{ state_attr('sensor.mamanchloreaajouter', 'message') or 'Retirer le chlore, pas de besoin actuellement' }}
                  {% endif %}
              - sensor.mamanlog

      - type: vertical-stack
        cards:
          - type: markdown
            content: |
              ## Historique pH / Chlore
          - type: history-graph
            hours_to_show: 48
            refresh_interval: 300
            entities:
              - sensor.papaph
              - sensor.papachlore
              - sensor.mamanph
              - sensor.mamanchlore
