# Tableau de bord pour une seule piscine.
# Remplacez '<name>' par le nom de votre piscine configur√©e dans Piscinexa (par exemple, 'piscine' ou 'spa').
# Assurez-vous que les entit√©s correspondent √† votre configuration dans Home Assistant.

type: sections
max_columns: 4
title: Piscine
path: piscine
icon: mdi:pool-thermometer
badges:
  - type: entity
    show_name: false
    show_state: true
    show_icon: true
    entity: sensor.piscinexa_<name>_consopuissance
  - type: entity
    show_name: false
    show_state: true
    show_icon: true
    entity: sensor.piscinexa_<name>_pool_state
  - type: entity
    show_name: false
    show_state: true
    show_icon: true
    entity: calendar.pompage_piscine
sections:
  - type: grid
    column_span: 3
    cards:
      - type: heading
        heading: üíß Gestion de la piscine
        heading_style: title
        badges:
          - type: entity
            entity: sensor.piscinexa_<name>_chloredifference
      - type: vertical-stack
        cards:
          - type: entities
            title: üß™ Informations principales - Chlore üß™
            show_header_toggle: false
            entities:
              - entity: sensor.piscinexa_<name>_chlore_target
                icon: mdi:pool
                name: Chlore cible
              - entity: sensor.piscinexa_<name>_chloredifference
                icon: mdi:delta
                name: Diff√©rence chlore
            state_color: true
          - type: entities
            title: üß™ Qualit√© de l'eau - Chlore
            show_header_toggle: false
            entities:
              - entity: sensor.piscinexa_<name>_chlore
                name: Chlore actuel
                icon: mdi:water-check
              - type: template
                entity_id: sensor.piscinexa_<name>_chloreaajouter
                content: >
                  {% if states('sensor.piscinexa_<name>_chloreaajouter') | float(default=0) > 0 %}
                    {{ states('sensor.piscinexa_<name>_chloreaajouter') }} {{ state_attr('sensor.piscinexa_<name>_chloreaajouter', 'unit_of_measurement') }} ({{ state_attr('sensor.piscinexa_<name>_chloreaajouter', 'treatment_type') }} pour {{ state_attr('sensor.piscinexa_<name>_chloreaajouter', 'volume') }} m¬≥)
                  {% else %}
                    Aucun ajustement n√©cessaire
                  {% endif %}
              - entity: sensor.piscinexa_<name>_consopuissance
                name: Consommation puissance
                icon: mdi:flash
          - type: history-graph
            title: üìä Historique Chlore (48h)
            hours_to_show: 48
            refresh_interval: 300
            entities:
              - entity: sensor.piscinexa_<name>_chlore
                name: Chlore
            logarithmic_scale: true
          - type: history-graph
            title: üíä Historique pH et Chlore (48h)
            hours_to_show: 48
            refresh_interval: 300
            entities:
              - entity: sensor.piscinexa_<name>_ph
                name: pH
              - entity: sensor.piscinexa_<name>_chlore
                name: Chlore
            logarithmic_scale: true
      - type: vertical-stack
        cards:
          - type: entities
            title: ‚öñÔ∏è Informations principales - pH ‚öñÔ∏è
            show_header_toggle: false
            entities:
              - entity: sensor.piscinexa_<name>_ph_target
                icon: mdi:target
                name: pH cible
              - entity: sensor.piscinexa_<name>_ph
                name: pH actuel
                icon: mdi:water
          - type: entities
            title: ‚öñÔ∏è Qualit√© de l'eau - pH
            show_header_toggle: false
            entities:
              - entity: sensor.piscinexa_<name>_ph
                name: pH actuel
                icon: mdi:water-ph
              - type: template
                entity_id: sensor.piscinexa_<name>_ph_plus_ajouter
                content: >
                  {% if states('sensor.piscinexa_<name>_ph_plus_ajouter') | float(default=0) > 0 %}
                    {{ states('sensor.piscinexa_<name>_ph_plus_ajouter') }} {{ state_attr('sensor.piscinexa_<name>_ph_plus_ajouter', 'unit_of_measurement') }}
                  {% else %}
                    Aucun ajustement n√©cessaire
                  {% endif %}
              - type: template
                entity_id: sensor.piscinexa_<name>_ph_minus_ajouter
                content: >
                  {% if states('sensor.piscinexa_<name>_ph_minus_ajouter') | float(default=0) > 0 %}
                    {{ states('sensor.piscinexa_<name>_ph_minus_ajouter') }} {{ state_attr('sensor.piscinexa_<name>_ph_minus_ajouter', 'unit_of_measurement') }}
                  {% else %}
                    Aucun ajustement n√©cessaire
                  {% endif %}
          - type: history-graph
            title: üìä Historique pH (48h)
            hours_to_show: 48
            refresh_interval: 300
            entities:
              - entity: sensor.piscinexa_<name>_ph
                name: pH
            logarithmic_scale: true
          - type: history-graph
            title: üå°Ô∏è Historique Temp√©rature (48h)
            hours_to_show: 48
            refresh_interval: 300
            entities:
              - entity: sensor.piscinexa_<name>_temperature
                name: Temp√©rature
            logarithmic_scale: true
      - type: vertical-stack
        cards:
          - type: entities
            title: üèä Contr√¥le Qualit√© Piscine üèä
            show_header_toggle: false
            entities:
              - entity: sensor.piscinexa_<name>_volume_eau
                name: Volume d'eau
                icon: mdi:pool
              - entity: sensor.piscinexa_<name>_tempsfiltration_recommande
                name: Temps de filtration recommand√©
                icon: mdi:clock
              - entity: sensor.piscinexa_<name>_tempsfiltration_effectue
                name: Temps de filtration effectu√©
                icon: mdi:clock-check
          - type: entities
            title: üíß Qualit√© de l'eau üíß
            show_header_toggle: false
            entities:
              - entity: sensor.piscinexa_<name>_ph
                name: pH actuel
                icon: mdi:water-ph
              - entity: sensor.piscinexa_<name>_chlore
                name: Chlore actuel
                icon: mdi:water-check
          - type: entities
            title: ‚ö° Consommation
            show_header_toggle: false
            entities:
              - entity: sensor.piscinexa_<name>_consopuissance
                name: Consommation de puissance
                icon: mdi:flash
          - type: entities
            title: üìù Journal des actions
            show_header_toggle: false
            entities:
              - entity: sensor.piscinexa_<name>_log
                name: Journal
                icon: mdi:notebook
          - type: horizontal-stack
            cards:
              - show_name: true
                show_icon: true
                type: button
                entity: button.piscinexa_<name>_test
                name: Tester les calculs
                icon: mdi:calculator
                tap_action:
                  action: call-service
                  service: piscinexa.test_calcul
                  service_data:
                    name: <name>
              - show_name: true
                show_icon: true
                type: button
                entity: button.piscinexa_<name>_reset
                name: R√©initialiser les valeurs
                icon: mdi:refresh
                tap_action:
                  action: call-service
                  service: piscinexa.reset_valeurs
                  service_data:
                    name: <name>
          - type: history-graph
            title: üìÜ Calendrier Pompage
            hours_to_show: 48
            refresh_interval: 300
            entities:
              - entity: calendar.pompage_piscine
            logarithmic_scale: true
      - type: heading
        heading: Nouvelle section
        heading_style: title
