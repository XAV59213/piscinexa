# Tableau de bord pour plusieurs piscines. Adaptez les noms ('papa', 'maman') aux noms configurés dans l'intégration.
title: Tableau de bord Piscinexa
views:
  - title: Piscines
    path: piscinexa
    icon: mdi:pool
    type: sidebar
    cards:
      - type: vertical-stack
        cards:
          - type: markdown
            content: |
              ## Piscine Papa
          - type: horizontal-stack
            cards:
              - type: button
                entity: button.piscinexa_papa_test
                name: Tester
              - type: button
                entity: button.piscinexa_papa_reset
                name: Réinitialiser
          - type: entities
            title: Saisie manuelle
            entities:
              - input_number.papa_ph_current
                name: pH Actuel
              - input_number.papa_chlore_current
                name: Chlore Actuel
          - type: entities
            entities:
              - sensor.piscinexa_papa_volume_eau
              - sensor.piscinexa_papa_temps_filtration
              - sensor.piscinexa_papa_ph
              - sensor.piscinexa_papa_chlore
              - sensor.piscinexa_papa_chlore_difference
                unit: mg/L
                name: Différence Chlore
              - type: template
                entity_id: sensor.piscinexa_papa_chlore_a_ajouter
                name: Chlore à ajouter
                content: >
                  {% if states('sensor.piscinexa_papa_chlore_a_ajouter') | float(default=0) > 0 %}
                    {{ states('sensor.piscinexa_papa_chlore_a_ajouter') }} {{ state_attr('sensor.piscinexa_papa_chlore_a_ajouter', 'unit_of_measurement') }}
                  {% else %}
                    {{ state_attr('sensor.piscinexa_papa_chlore_a_ajouter', 'message') or 'Retirer le chlore, pas de besoin actuellement' }}
                  {% endif %}
              - sensor.piscinexa_papa_log
              - entity: sensor.piscinexa_papa_pool_state
                name: État de la piscine

      - type: vertical-stack
        cards:
          - type: markdown
            content: |
              ## Piscine Maman
          - type: horizontal-stack
            cards:
              - type: button
                entity: button.piscinexa_maman_test
                name: Tester
              - type: button
                entity: button.piscinexa_maman_reset
                name: Réinitialiser
          - type: entities
            title: Saisie manuelle
            entities:
              - input_number.maman_ph_current
                name: pH Actuel
              - input_number.maman_chlore_current
                name: Chlore Actuel
          - type: entities
            entities:
              - sensor.piscinexa_maman_volume_eau
              - sensor.piscinexa_maman_temps_filtration
              - sensor.piscinexa_maman_ph
              - sensor.piscinexa_maman_chlore
              - sensor.piscinexa_maman_chlore_difference
                unit: mg/L
                name: Différence Chlore
              - type: template
                entity_id: sensor.piscinexa_maman_chlore_a_ajouter
                name: Chlore à ajouter
                content: >
                  {% if states('sensor.piscinexa_maman_chlore_a_ajouter') | float(default=0) > 0 %}
                    {{ states('sensor.piscinexa_maman_chlore_a_ajouter') }} {{ state_attr('sensor.piscinexa_maman_chlore_a_ajouter', 'unit_of_measurement') }}
                  {% else %}
                    {{ state_attr('sensor.piscinexa_maman_chlore_a_ajouter', 'message') or 'Retirer le chlore, pas de besoin actuellement' }}
                  {% endif %}
              - sensor.piscinexa_maman_log
              - entity: sensor.piscinexa_maman_pool_state
                name: État de la piscine

      - type: vertical-stack
        cards:
          - type: markdown
            content: |
              ## Historique pH / Chlore
          - type: history-graph
            hours_to_show: 48
            refresh_interval: 300
            entities:
              - sensor.piscinexa_papa_ph
              - sensor.piscinexa_papa_chlore
              - sensor.piscinexa_maman_ph
              - sensor.piscinexa_maman_chlore